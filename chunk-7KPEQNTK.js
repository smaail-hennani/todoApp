import{a as k,b as B,c as u,d as R,e as T,f as D,g,h as G,i as V,j as z,k as q,l as x}from"./chunk-I2AX636G.js";import{$ as C,Ba as I,Ea as N,L as t,Q as f,R as l,T as i,U as s,V as m,W as d,Y as h,Z as S,_ as a,ca as b,da as y,ia as M,ka as w,na as F,ua as E,x as p,ya as L,z as v,za as _}from"./chunk-HNWXAOUL.js";var A=o=>({"active-btn":o});function j(o,H){if(o&1&&(s(0,"p"),a(1),m()),o&2){let r=S();i(r.layoutClass),t(),C(r.errorMsg)}}var oe=(()=>{class o{constructor(){this.showError=!1,this.errorMsg="Email ou mot de passe incorrect, veuillez vous inscrire",this.authService=p(N),this.router=p(L),this.responsiveService=p(x),this.loginForm=new D({email:new g("",[u.required,u.email]),password:new g("",[u.required])})}get layoutClass(){return this.responsiveService.isMobile?(console.log("Is Mobile: ",this.responsiveService.isMobile),"mobile-layout"):this.responsiveService.isTablet?(console.log("Is Tablet: ",this.responsiveService.isTablet),"tablet-layout"):(console.log("Is Desktop: ",this.responsiveService.isDesktop),"desktop-layout")}onSubmit(){if(this.loginForm.invalid)return;let r=this.loginForm.value.email,n=this.loginForm.value.password;this.authService.login(r,n).subscribe({next:e=>{let c=e.token;c?(localStorage.setItem("token",c),localStorage.setItem("email",r),this.router.navigateByUrl("/todos")):this.showError=!0},error:()=>{this.showError=!0}})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=v({type:o,selectors:[["app-login"]],standalone:!0,features:[b],decls:14,vars:23,consts:[[3,"isRegisterBtnShown","isLoginBtnShown","isLogoutBtnShown"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"title"],[1,"sub-title"],["routerLink","/register"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Mot de passe","formControlName","password"],[3,"class",4,"ngIf"],["type","submit","id","login-button",1,"auth-btn",3,"ngClass","disabled"]],template:function(n,e){n&1&&(d(0,"app-toolbar",0),s(1,"form",1),h("ngSubmit",function(){return e.onSubmit()}),s(2,"h2",2),a(3,"Connectez-vous"),m(),s(4,"h3",3),a(5," Veuillez entrer votre email "),s(6,"a",4),a(7,"S'inscrire"),m()(),d(8,"br")(9,"input",5)(10,"input",6),f(11,j,2,3,"p",7),s(12,"button",8),a(13," Connexion "),m()()),n&2&&(l("isRegisterBtnShown",!0)("isLoginBtnShown",!1)("isLogoutBtnShown",!1),t(),i(e.layoutClass),l("formGroup",e.loginForm),t(),i(e.layoutClass),t(2),i(e.layoutClass),t(2),i(e.layoutClass),t(3),i(e.layoutClass),t(),i(e.layoutClass),t(),l("ngIf",e.showError),t(),i(e.layoutClass),l("ngClass",y(21,A,!e.loginForm.invalid))("disabled",e.loginForm.invalid))},dependencies:[F,M,w,k,q,G,B,R,T,V,z,I,_,E]})}}return o})();export{oe as default};
