import{a as S}from"./chunk-7YOS3BQJ.js";import{a as A,b as G,c as B,d as H,e as R,f as q,g as F,h as z,i as J,j as K,k as Q,l as v}from"./chunk-LLPLEQBK.js";import{E as x,F as M,L as c,Q as j,R as a,T as b,U as r,V as s,W as T,X as D,Y as d,Z as w,_ as l,a as O,aa as k,b as E,ca as f,da as _,ea as N,fa as $,g as y,i as L,ia as C,j as P,ja as I,la as V,na as g,ua as h,x as p,z as u}from"./chunk-V55VPPCX.js";var te=o=>({"active-btn":o}),W=(()=>{class o{constructor(){this.ts=p(S),this.responsiveService=p(v),this.addTodoForm=new q({title:new F("",B.required),description:new F("")})}get layoutClass(){return this.responsiveService.isMobile?"mobile-layout":this.responsiveService.isTablet?"tablet-layout":"form-container2"}onSubmit(){let e={title:this.addTodoForm.value.title,description:this.addTodoForm.value.description,done:!1,userEmail:localStorage.getItem("email")};this.ts.newTodo(e).subscribe({next:t=>{let i=E(O({},e),{id:t.todoId});this.ts.addLocal(i),this.addTodoForm.reset()},error:t=>console.error("Erreur lors de l'ajout du todo:",t)})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-add-todo"]],standalone:!0,features:[f],decls:5,vars:7,consts:[[1,"form-container2",3,"ngSubmit","formGroup"],["type","text","placeholder","Titre","formControlName","title"],["type","text","placeholder","Description","formControlName","description"],["type","submit",1,"auth-btn",3,"ngClass","disabled"]],template:function(t,i){t&1&&(r(0,"form",0),d("ngSubmit",function(){return i.onSubmit()}),T(1,"input",1)(2,"input",2),r(3,"button",3),l(4," Ajouter "),s()()),t&2&&(b(i.layoutClass),a("formGroup",i.addTodoForm),c(3),a("ngClass",_(5,te,!i.addTodoForm.invalid))("disabled",i.addTodoForm.invalid))},dependencies:[g,C,Q,z,G,H,R,J,K,h],styles:[".form-container2[_ngcontent-%COMP%]{width:max-content;justify-content:center;border-radius:8px;margin:2rem auto;display:flex;padding:0;border:none;box-shadow:0 0 #0000001a}.form-container2.mobile-layout[_ngcontent-%COMP%]{max-width:300px;padding:1rem;font-size:1.2em;margin:50px auto;border:1px grey solid}.form-container2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .5rem}input[type=text][_ngcontent-%COMP%]{width:auto}.auth-btn[_ngcontent-%COMP%]{width:100%;padding:14px 20px;border-radius:8px}"]})}}return o})();var oe=o=>({done:o});function ie(o,Y){if(o&1){let e=D();r(0,"div",3)(1,"div",4)(2,"input",5),d("click",function(){let i=x(e).$implicit,n=w();return M(n.updateTodo(i))}),s(),r(3,"div",6)(4,"h4",7),l(5),s(),r(6,"h5",8),l(7),s()()(),r(8,"button",9),d("click",function(){let i=x(e).$implicit,n=w();return M(n.deleteTodo(i))}),l(9,"Supprimer"),s()()}if(o&2){let e=Y.$implicit;c(2),a("checked",e.done),c(),a("ngClass",_(4,oe,e.done)),c(2),k(" ",e.title," "),c(2),k(" ",e.description," ")}}var X=(()=>{class o{constructor(){this.ts=p(S),this.responsiveService=p(v),this.email=null,this.todos$=this.ts.todos$,this.filterSubject=new y("all"),this.sortSubject=new y(!1),this.filteredTodos$=P([this.todos$,this.filterSubject,this.sortSubject]).pipe(L(([e,t,i])=>{let n=e;return t==="done"?n=e.filter(m=>m.done):t==="notDone"&&(n=e.filter(m=>!m.done)),i&&(n=[...n].sort((m,Z)=>m.done===Z.done?0:m.done?1:-1)),n})),this.deleteTodo=e=>this.ts.deleteTodo(e).subscribe({next:()=>{console.log("Todo deleted successfully:",e),this.ts.removeLocal(e)},error:t=>console.error("Error delete todo:",t)})}get layoutClass(){return this.responsiveService.isMobile?(console.log("Is Mobile: ",this.responsiveService.isMobile),"mobile-layout"):this.responsiveService.isTablet?(console.log("Is Tablet: ",this.responsiveService.isTablet),"tablet-layout"):"actions-container"}ngOnInit(){typeof localStorage<"u"?(this.email=localStorage.getItem("email"),console.log("test email : ",this.email)):console.log("localStorage n'est pas disponible"),this.email&&(this.ts.loadTodos(this.email),this.todos$=this.ts.todos$)}updateTodo(e){e.done=!e.done,this.ts.updateTodo(e).subscribe({next:()=>console.log("Todo updated successfully:",e),error:t=>console.error("Error updating todo:",t)})}sortTasks(){this.sortSubject.next(!this.sortSubject.value)}filterTasks(e){this.filterSubject.next(e)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-todo-list"]],standalone:!0,features:[f],decls:11,vars:5,consts:[[1,"actions-container"],[3,"click"],["class","todo-card-container",4,"ngFor","ngForOf"],[1,"todo-card-container"],[1,"todo-content"],["type","checkbox","name","done",3,"click","checked"],[1,"title-desc",3,"ngClass"],[1,"title"],[1,"description"],[1,"delete-btn",3,"click"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"button",1),d("click",function(){return i.filterTasks("all")}),l(2,"Toutes les t\xE2ches"),s(),r(3,"button",1),d("click",function(){return i.filterTasks("done")}),l(4,"T\xE2ches faites"),s(),r(5,"button",1),d("click",function(){return i.filterTasks("notDone")}),l(6,"T\xE2ches non faites"),s(),r(7,"button",1),d("click",function(){return i.sortTasks()}),l(8,"Trier par ordre croissant (non faites -> faites)"),s()(),j(9,ie,10,6,"div",2),N(10,"async")),t&2&&(b(i.layoutClass),c(9),a("ngForOf",$(10,3,i.filteredTodos$)))},dependencies:[g,C,I,V,h],styles:[".todo-card-container[_ngcontent-%COMP%]{width:clamp(80%,5vw,90%);max-width:1200px;margin:1rem auto;display:flex;justify-content:space-between;align-items:center;border-radius:8px;border:1px #2828281a solid;padding:1rem;background-color:var(--bg-task)}.todo-content[_ngcontent-%COMP%]{display:flex}.title-desc[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:.2rem;font-weight:400}.done[_ngcontent-%COMP%]{text-decoration:line-through}input[_ngcontent-%COMP%]{width:20px;margin-right:1rem}.delete-btn[_ngcontent-%COMP%]{padding:.5rem;border-radius:8px;color:#fff;background:red;border:none}.delete-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}}return o})();var Fe=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-todo"]],standalone:!0,features:[f],decls:3,vars:1,consts:[[3,"isLogoutBtnShown"]],template:function(t,i){t&1&&T(0,"app-toolbar",0)(1,"app-add-todo")(2,"app-todo-list"),t&2&&a("isLogoutBtnShown",!0)},dependencies:[g,A,W,X,h]})}}return o})();export{Fe as default};
